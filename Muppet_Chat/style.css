/* ---------- RESET ---------- */
*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui, sans-serif;
  background: radial-gradient(circle at top, #2b2a4a, #14142b);
  color:#e6e6ff;
}

/* ---------- NAVBAR ---------- */
.navbar{
  display:flex;
  justify-content:space-around;
  align-items:center;
  padding:0.75rem;
  background:#3b3a63;
  position:sticky;
  top:0;
  z-index:10;
  backdrop-filter: blur(6px);
}

.navbar img{
  width:26px;
  filter:invert(1);
  transition:transform .2s ease;
}

.navbar a:hover img{
  transform:scale(1.15);
}

@media(min-width:768px){
  .navbar img{width:32px}
}

/* ---------- FEED ---------- */
.feed{
  max-width:520px;
  margin:3rem auto;
  padding:0 1rem;
}

.page-title{
  text-align:center;
  color:#9d8cff;
  margin-bottom:2rem;
}

/* ---------- POSTS ---------- */
.post{
  background:#2f2e54;
  border-radius:14px;
  padding:1rem;
  margin-bottom:2rem;
  box-shadow:0 15px 40px rgba(0,0,0,.35);
  animation:fadeUp .4s ease;
}

/* CRT glow */
.crt{
  box-shadow:
    inset 0 0 20px rgba(150,160,255,.12),
    0 0 30px rgba(0,0,0,.4);
}

/* ---------- HEADER ---------- */
.post-header{
  display:flex;
  align-items:center;
  gap:.75rem;
}

.avatar{
  width:36px;
  height:36px;
  border-radius:50%;
  background:linear-gradient(135deg,#8fa4ff,#5f6fff);
}

.username{
  font-weight:600;
}

/* ---------- CONTENT ---------- */
.post-text{margin:1rem 0}

.post-image{
  width:100%;
  border-radius:10px;
  margin-bottom:1rem;
}

/* ---------- ACTIONS ---------- */
.post-actions{
  display:flex;
  justify-content:space-between;
  margin-top:.5rem;
}

.icon-btn{
  background:none;
  border:none;
  color:#ccc;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:.4rem;
  transition:transform .15s ease, color .15s ease;
}

.icon-btn img{
  width:20px;
  height:20px;
  filter:invert(1);
  opacity:.85;
}

.icon-btn:hover{
  transform:scale(1.1);
  color:#9d8cff;
}

.icon-btn.active img {
  animation: pop .25s ease;
}

@keyframes pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.35); }
  100% { transform: scale(1); }
}



/* ---------- REPLIES ---------- */
.reply-panel{
  display:none;
  border-top:1px solid rgba(255,255,255,.1);
  margin-top:1rem;
  padding-top:1rem;
}

.reply-panel.open{display:block}

.reply{
  padding: .6rem .75rem;
  margin-bottom: .5rem;
  background: rgba(0,0,0,.15);
  border-left: 3px solid #6d6cff;
  border-radius: 6px;
}

.reply-user{
  display:block;
  font-size:.8rem;
  color:#9d8cff;
  margin-bottom:.15rem;
}


.reply-form textarea{
  width:100%;
  background:#1d1c3a;
  border:none;
  border-radius:8px;
  padding:.6rem;
  color:#fff;
  margin-bottom:.5rem;
}

.reply-form button{
  background:#6d6cff;
  border:none;
  border-radius:6px;
  padding:.4rem .8rem;
  color:white;
  cursor:pointer;
}

/* ---------- PACKET TEXT LAYER ---------- */
/* background effects */
.packet-layer { z-index: 0; }

/* main content */
.feed, .post, .navbar { 
  position: relative;
  z-index: 2;
}

.packet-layer{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
  overflow:hidden;
}

/* individual packet */
.packet{
  position:absolute;
  left:-30%;
  white-space:nowrap;
  font-family: "Courier New", monospace;
  font-size:12px;
  color:rgba(0,255,120,.85);
  text-shadow:0 0 6px rgba(0,255,120,.6);
  filter:blur(2px);
  opacity:0;
  animation-timing-function: cubic-bezier(.4,.0,.2,1);

  /* so that they pass the screen quickly but take a while to show up again */
  animation:packetDrift 72s linear infinite;
}
.packet:nth-child(odd){
  filter:blur(1px);
}


/* staggered packets */
.packet:nth-child(1){ top:20%; animation-delay:-5s }
.packet:nth-child(2){ top:42%; animation-delay:-18s }
.packet:nth-child(3){ top:65%; animation-delay:-33s }
.packet:nth-child(4){ top:86%; animation-delay:-47s }
.packet:nth-child(5){ top:74%; animation-delay:-59s }
.packet:nth-child(6){ top:34%; animation-delay:-71s }

@keyframes packetDrift{
    /* I needed help to make this work as I didnt understand animation delay very well */
  /* hidden for most of the cycle */
  0%{
    transform:translateX(0);
    opacity:0;
  }
  /* packet appears */
  5%{
    opacity:.35;
  }
  /* packet travels across screen */
  10%{
    transform:translateX(160vw);
    opacity:.35;
  }
  /* packet fades out */
  12%{
    opacity:0;
  }
  /* stay hidden for the rest */
  100%{
    transform:translateX(160vw);
    opacity:0;
  }
}


/* ---------- MOTION ---------- */
@keyframes fadeUp{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:none}
}

/* ------------ CRT ----------- */
body::after{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,.08),
      rgba(255,255,255,.08) 1px,
      transparent 1px,
      transparent 3px
    );
  mix-blend-mode: overlay;
  animation:crtmovement 30s linear infinite;
  z-index:2;
}

@keyframes crtmovement{
  from{ background-position-y:800px; }
  to{ background-position-y:0; }
}
